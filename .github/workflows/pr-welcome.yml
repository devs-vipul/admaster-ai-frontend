name: PR Welcome & Tips

on:
  pull_request:
    types: [opened]

permissions:
  pull-requests: write

jobs:
  welcome:
    name: ðŸ‘‹ Welcome PR
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ‘‹ Welcome comment
        uses: actions/github-script@v7
        with:
          script: |
            const prAuthor = context.payload.pull_request.user.login;
            const prNumber = context.payload.pull_request.number;
            const prTitle = context.payload.pull_request.title;

            const welcomeMessage = `## ðŸ‘‹ Thanks for your contribution, @${prAuthor}!

Your PR **#${prNumber}: ${prTitle}** is now being reviewed.

### ðŸ¤– Automated Checks Running

The following checks will run automatically:
- âœ… **Lint Check** - ESLint validation
- âœ… **Type Check** - TypeScript validation  
- âœ… **Build Check** - Ensure code builds successfully
- âœ… **Format Check** - Prettier code formatting
- âœ… **Security Audit** - Dependency vulnerabilities
- âœ… **CodeQL Analysis** - Security code scanning
- âœ… **PR Validation** - Title format and size check

### ðŸ“‹ Before Merging

Please ensure:
- [ ] All CI checks pass âœ…
- [ ] Code is properly tested
- [ ] Documentation is updated (if needed)
- [ ] No console.log or debug statements
- [ ] Commits follow [Conventional Commits](https://www.conventionalcommits.org/)

### ðŸ’¡ Tips

- **PR Title Format:** Use \`type: description\` (e.g., \`feat: add user login\`)
  - Types: \`feat\`, \`fix\`, \`docs\`, \`style\`, \`refactor\`, \`test\`, \`chore\`
- **Keep PRs Small:** Aim for < 500 lines changed for easier review
- **Link Issues:** Reference related issues with \`Fixes #123\` or \`Closes #456\`

### ðŸš€ What's Next?

1. Wait for CI checks to complete
2. Address any failed checks
3. Request review from team members
4. Respond to review feedback
5. Merge when approved! ðŸŽ‰

---

*This is an automated message. Questions? Check our [Contributing Guide](../README.md).*`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              body: welcomeMessage
            });

